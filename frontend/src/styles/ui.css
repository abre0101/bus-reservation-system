/* Central UI mapping for Tailwind - add mappings here */
@layer base {
  /* global base rules (resets, fonts, body) */
  html, body, #root { 
    @apply min-h-screen; 
  }
  body { 
    @apply font-sans antialiased bg-gray-50 text-gray-800;
  }
  
  /* Custom scrollbar */
  ::-webkit-scrollbar {
    @apply w-2;
  }
  ::-webkit-scrollbar-track {
    @apply bg-gray-100 rounded;
  }
  ::-webkit-scrollbar-thumb {
    @apply bg-gray-400 rounded hover:bg-gray-500 transition-colors;
  }
}

@layer components {
  /* ===== NAVIGATION COMPONENTS ===== */
  .navbar {
    @apply w-full top-0 left-0 z-40 transition-all duration-300;
  }
  .navbar.scrolled {
    @apply bg-white/80 backdrop-blur-md shadow-sm border-b border-gray-200;
  }

  .nav-container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  .nav-content {
    @apply flex items-center justify-between py-4;
  }

  /* Brand */
  .nav-brand {
    @apply inline-flex items-center gap-3 no-underline hover:no-underline;
  }
  .brand-container { 
    @apply flex items-center gap-3; 
  }
  .brand-icon-wrapper { 
    @apply flex items-center; 
  }

  /* Bus Icon */
  .bus-icon { 
    @apply flex items-center gap-3 select-none; 
  }
  .bus-body {
    @apply w-12 h-8 rounded-lg bg-blue-600 relative flex items-center justify-evenly shadow-md;
  }
  .bus-window {
    @apply w-3 h-3 bg-white/80 rounded-sm;
  }
  .bus-wheels { 
    @apply flex gap-2 ml-1; 
  }
  .wheel { 
    @apply w-3 h-3 bg-black rounded-full opacity-80; 
  }

  .brand-text { 
    @apply flex flex-col leading-none; 
  }
  .brand-primary { 
    @apply text-lg font-extrabold text-slate-800; 
  }
  .brand-secondary { 
    @apply text-lg font-extrabold text-blue-600; 
  }

  /* Desktop Navigation */
  .nav-desktop { 
    @apply hidden md:flex items-center gap-6; 
  }
  .nav-links { 
    @apply flex items-center gap-1 list-none m-0 p-0; 
  }
  .nav-link {
    @apply inline-flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100 hover:text-gray-900 no-underline transition-colors duration-200;
  }
  .nav-link.active { 
    @apply bg-blue-50 text-blue-600 font-semibold; 
  }
  .nav-link.operator { 
    @apply text-yellow-600 hover:bg-yellow-50; 
  }
  .nav-link.admin { 
    @apply text-red-600 hover:bg-red-50; 
  }

  /* User Section & Dropdown */
  .nav-user-section { 
    @apply ml-4 flex items-center; 
  }
  .user-dropdown { 
    @apply relative; 
  }
  .user-trigger {
    @apply flex items-center gap-3 cursor-pointer select-none p-2 rounded-md hover:bg-gray-100 transition-colors;
  }
  .user-avatar {
    @apply w-9 h-9 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white flex items-center justify-center font-semibold shadow-sm;
  }
  .user-avatar.large { 
    @apply w-14 h-14 text-2xl; 
  }
  .user-info { 
    @apply hidden sm:flex flex-col text-left; 
  }
  .user-name { 
    @apply text-sm font-semibold text-slate-900; 
  }
  .user-role { 
    @apply text-xs text-gray-500; 
  }
  .dropdown-arrow { 
    @apply text-sm text-gray-400 transition-transform duration-200; 
  }
  .user-dropdown:hover .dropdown-arrow {
    @apply rotate-180;
  }

  .dropdown-menu {
    @apply absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-xl border border-gray-200 p-2 hidden z-50;
  }
  .user-dropdown:hover .dropdown-menu,
  .user-dropdown:focus-within .dropdown-menu {
    @apply block;
  }

  .dropdown-header { 
    @apply flex items-center gap-3 p-3 border-b border-gray-100 mb-1; 
  }
  .user-details { 
    @apply flex flex-col flex-1; 
  }
  .user-email { 
    @apply text-xs text-gray-500 truncate; 
  }
  .user-role-badge { 
    @apply mt-1 inline-block px-2 py-1 rounded-full bg-gray-100 text-xs text-gray-700 font-medium; 
  }

  .dropdown-divider { 
    @apply my-1 border-t border-gray-100; 
  }
  .dropdown-item {
    @apply block w-full text-left px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 rounded-md no-underline transition-colors;
  }
  .dropdown-item.logout { 
    @apply text-red-600 hover:bg-red-50; 
  }

  /* Auth Buttons */
  .auth-buttons { 
    @apply flex items-center gap-3; 
  }
  .login-btn { 
    @apply inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:shadow-sm hover:bg-gray-50 no-underline transition-all duration-200; 
  }
  .signup-btn { 
    @apply inline-flex items-center px-4 py-2 text-sm font-medium bg-blue-600 text-white rounded-lg hover:bg-blue-700 no-underline transition-all duration-200 shadow-sm; 
  }

  /* Mobile Navigation */
  .mobile-menu-btn {
    @apply md:hidden flex flex-col justify-center items-center gap-1 w-10 h-10 p-2 rounded-md bg-transparent border-0 cursor-pointer transition-all duration-300;
  }
  .mobile-menu-btn span { 
    @apply block w-6 h-0.5 bg-gray-700 rounded transition-all duration-300; 
  }
  .mobile-menu-btn.active span:nth-child(1) { 
    transform: translateY(7px) rotate(45deg); 
  }
  .mobile-menu-btn.active span:nth-child(2) { 
    opacity: 0; 
  }
  .mobile-menu-btn.active span:nth-child(3) { 
    transform: translateY(-7px) rotate(-45deg); 
  }

  .nav-mobile {
    @apply md:hidden fixed inset-x-0 top-16 bg-white shadow-xl border-t border-gray-200 max-h-[70vh] overflow-auto transform transition-all duration-300 -translate-y-2 opacity-0 pointer-events-none z-40;
  }
  .nav-mobile.active {
    @apply translate-y-0 opacity-100 pointer-events-auto;
  }

  .mobile-user-info { 
    @apply flex items-center gap-3 p-4 border-b border-gray-100 bg-gray-50; 
  }
  .mobile-nav-links { 
    @apply list-none m-0 p-4 flex flex-col gap-1; 
  }
  .mobile-nav-link { 
    @apply flex items-center justify-between gap-2 px-3 py-3 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 no-underline transition-colors; 
  }
  .mobile-nav-link.active { 
    @apply bg-blue-50 text-blue-600 font-semibold; 
  }
  .mobile-nav-divider { 
    @apply my-2 border-t border-gray-100; 
  }
  .mobile-logout-btn { 
    @apply w-full text-left px-3 py-3 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg transition-colors; 
  }
  .mobile-login-btn, .mobile-signup-btn { 
    @apply block w-full px-4 py-3 text-center rounded-lg font-medium transition-colors; 
  }
  .mobile-login-btn { 
    @apply border border-gray-300 text-gray-700 hover:bg-gray-50; 
  }
  .mobile-signup-btn { 
    @apply bg-blue-600 text-white hover:bg-blue-700; 
  }

  /* Mobile Overlay */
  .mobile-overlay {
    @apply fixed inset-0 bg-black/30 z-30 md:hidden transition-opacity duration-300;
  }

  /* ===== BUTTON COMPONENTS ===== */
  .btn { 
    @apply inline-flex items-center justify-center rounded-lg px-4 py-2 font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed; 
  }
  .btn-primary { 
    @apply bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 shadow-sm hover:shadow; 
  }
  .btn-secondary {
    @apply bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 shadow-sm hover:shadow;
  }
  .btn-success {
    @apply bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 shadow-sm hover:shadow;
  }
  .btn-warning {
    @apply bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500 shadow-sm hover:shadow;
  }
  .btn-danger {
    @apply bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow;
  }
  .btn-outline {
    @apply border border-gray-300 bg-transparent text-gray-700 hover:bg-gray-50 focus:ring-gray-500;
  }
  .btn-ghost {
    @apply bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500;
  }

  /* Button Sizes */
  .btn-sm {
    @apply px-3 py-1.5 text-sm;
  }
  .btn-lg {
    @apply px-6 py-3 text-lg;
  }
  .btn-xl {
    @apply px-8 py-4 text-xl;
  }

  /* ===== FORM COMPONENTS ===== */
  .form-group {
    @apply mb-4;
  }
  .form-label {
    @apply block text-sm font-medium text-gray-700 mb-2;
  }
  .form-control {
    @apply w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200;
  }
  .form-select {
    @apply form-control pr-10 bg-no-repeat bg-right;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.5rem center;
    background-size: 1.5em 1.5em;
  }
  .form-textarea {
    @apply form-control resize-vertical;
  }
  .form-checkbox {
    @apply rounded border-gray-300 text-blue-600 focus:ring-blue-500;
  }
  .form-radio {
    @apply rounded-full border-gray-300 text-blue-600 focus:ring-blue-500;
  }

  /* ===== CARD COMPONENTS ===== */
  .card {
    @apply bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden;
  }
  .card-header {
    @apply px-6 py-4 border-b border-gray-200 bg-gray-50;
  }
  .card-body {
    @apply px-6 py-4;
  }
  .card-footer {
    @apply px-6 py-4 border-t border-gray-200 bg-gray-50;
  }

  /* ===== LAYOUT COMPONENTS ===== */
  .dashboard-container { 
    @apply p-6 min-h-screen bg-gray-50; 
  }
  .container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }
  .section {
    @apply py-12;
  }
  .section-lg {
    @apply py-16;
  }
  .section-xl {
    @apply py-20;
  }

  /* ===== ALERT COMPONENTS ===== */
  .alert {
    @apply p-4 rounded-lg border-l-4;
  }
  .alert-success {
    @apply bg-green-50 border-green-400 text-green-700;
  }
  .alert-warning {
    @apply bg-yellow-50 border-yellow-400 text-yellow-700;
  }
  .alert-error {
    @apply bg-red-50 border-red-400 text-red-700;
  }
  .alert-info {
    @apply bg-blue-50 border-blue-400 text-blue-700;
  }

  /* ===== LOADING COMPONENTS ===== */
  .spinner {
    @apply inline-block w-6 h-6 border-2 border-gray-200 border-t-blue-600 rounded-full animate-spin;
  }
  .spinner-sm {
    @apply w-4 h-4 border-2;
  }
  .spinner-lg {
    @apply w-8 h-8 border-3;
  }
  .loading {
    @apply flex items-center justify-center p-8;
  }
  .loading-small {
    @apply text-sm text-gray-500 mt-1;
  }

  /* ===== TABLE COMPONENTS ===== */
  .table {
    @apply w-full border-collapse;
  }
  .table th {
    @apply bg-gray-50 px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200;
  }
  .table td {
    @apply px-4 py-3 border-b border-gray-200 text-sm text-gray-900;
  }
  .table tr:hover {
    @apply bg-gray-50;
  }

  /* ===== BADGE COMPONENTS ===== */
  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
  }
  .badge-primary {
    @apply bg-blue-100 text-blue-800;
  }
  .badge-secondary {
    @apply bg-gray-100 text-gray-800;
  }
  .badge-success {
    @apply bg-green-100 text-green-800;
  }
  .badge-warning {
    @apply bg-yellow-100 text-yellow-800;
  }
  .badge-danger {
    @apply bg-red-100 text-red-800;
  }

  /* ===== HOME PAGE COMPONENTS ===== */
  .hero {
    @apply relative py-20 bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden;
  }
  .hero-grid {
    @apply grid lg:grid-cols-2 gap-12 items-center;
  }
  .hero-content {
    @apply space-y-6;
  }
  .search-widget {
    @apply bg-white rounded-2xl shadow-xl p-8 space-y-6;
  }
  .widget-header {
    @apply text-center;
  }
  .input-group {
    @apply space-y-2;
  }
  .features-grid {
    @apply grid md:grid-cols-2 lg:grid-cols-3 gap-8;
  }
  .feature-card {
    @apply text-center p-6 rounded-lg hover:shadow-lg transition-shadow duration-300;
  }
  .routes-grid {
    @apply grid md:grid-cols-2 lg:grid-cols-3 gap-6;
  }
  .route-card {
    @apply bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-shadow duration-300;
  }

  /* ===== UTILITY CLASSES ===== */
  .text-balance {
    text-wrap: balance;
  }
  .shadow-glow {
    box-shadow: 0 0 20px rgba(59, 130, 246, 0.1);
  }
}

@layer utilities {
  /* Custom utilities */
  .backdrop-safari {
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
  }
  
  .scroll-smooth {
    scroll-behavior: smooth;
  }
  
  .gradient-text {
    @apply bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent;
  }
}